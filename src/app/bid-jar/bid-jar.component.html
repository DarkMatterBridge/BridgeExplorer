<div class="bidjar">

    <div class="topline">
    <app-bnode-sequence [subject]="subject" (selectNode)="setBnode($event)"
                        (bNodeSequenceEventEmitter)="activateDealView2($event)"
    ></app-bnode-sequence>

    <button mat-icon-button [matMenuTriggerFor]="menu2" style="text-align: right">
      <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #menu2="matMenu">

      <a [routerLink]="" (click)="saveIntoLocalStorage()" matTooltip="Save to local storage">
        <mat-icon aria-hidden="false" aria-label="Example home icon">save</mat-icon>
      </a>
      <a [routerLink]="" (click)="loadFromLocalStorage()" matTooltip="Retrieve from local storage">
        <mat-icon aria-hidden="false" aria-label="Example home icon">restore_page</mat-icon>
      </a>

      <a [routerLink]="" (click)="downloadSystem()" matTooltip="Download System as JSON">
        <mat-icon aria-hidden="false" aria-label="Example home icon">download</mat-icon>
      </a>

      <a [routerLink]="" (click)="triggerFileUpload()" matTooltip="Upload JSON-based System">
        <mat-icon aria-hidden="false" aria-label="Example home icon">upload</mat-icon>
      </a>


      <button mat-menu-item>
        <a [routerLink]="" (click)="loadElementarySystem()"> Load Elementary System </a> -
      </button>
      <button mat-menu-item>
        <a [routerLink]="" (click)="loadLegacySystem()"> Load Legacy System </a> -
      </button>
      <button mat-menu-item>
        <a [routerLink]="" (click)="resetSystem()"> Load new System </a> -
      </button>


    </mat-menu>
</div>






  <table>
    <tr>
      <td>
        <a [routerLink]="" (click)="showStatistics()">
          <mat-icon>analytics</mat-icon>
        </a>

        <span *ngIf="!editable">
        <a [routerLink]="" (click)="editable=true" matTooltip="Edit">
          <mat-icon aria-hidden="false" aria-label="Example home icon">edit</mat-icon>
        </a>
        <span [ngClass]="{'opp': bnode.ob}">
        <app-strain-symbol [strain]="bnode.bid"></app-strain-symbol>
          </span>
        :
          <span class="con"> {{bnode.con}}</span>
          <span class="desc"> {{bnode.desc}}</span>
        <a [routerLink]="" (click)="markAsLinkable()" matTooltip="Mark as linkable Node">
          <mat-icon aria-hidden="false" aria-label="Example home icon">link</mat-icon>
        </a>
      </span>

        <span *ngIf="editable">
        <a [routerLink]="" (click)="editable=false" matTooltip="Leave Edit">
          <mat-icon>edit_off</mat-icon>
        </a>
        <app-node-simple-edit [bnode]="bnode"></app-node-simple-edit>
      </span>

        <app-bid-list [bnode]="bnode" [subject]="subject"></app-bid-list>

        <app-linkable-bnode-list [linkableBnodes]="linkableBnodes"
                                 (linkNodeEvent)="linkBnode($event)"></app-linkable-bnode-list>
      </td>
      <td *ngIf="dealViewActivated">
        <app-deal-view [bNodeSequence]="bNodeSequence"></app-deal-view>
      </td>

    </tr>
  </table>

  <input #fileInput type="file" accept=".json" (change)="processFile(fileInput)" style="visibility:hidden">
</div>
