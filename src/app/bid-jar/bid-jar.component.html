<div class="bidjar">

  <div class="topline">
    <app-bnode-sequence [subject]="subject" (selectNode)="setBnode($event)"
                        (bNodeSequenceEventEmitter)="activateDealView2($event)"
    ></app-bnode-sequence>

    <div>
          <a [routerLink]="" (click)="editable=!editable" matTooltip="Edit" >
            <mat-icon aria-hidden="false" aria-label="Example home icon">edit</mat-icon>
          </a>

    <button mat-icon-button [matMenuTriggerFor]="menu2" style="text-align: right">
      <mat-icon>more_vert</mat-icon>
    </button>
    </div>
    f
    <mat-menu #menu2="matMenu" xPosition="before">

      <button mat-menu-item (click)="saveIntoLocalStorage()">
        <mat-icon aria-hidden="false" aria-label="Example home icon">save</mat-icon>
        Save to Browser Storage
      </button>
      <button mat-menu-item (click)="loadFromLocalStorage()">
        <mat-icon aria-hidden="false" aria-label="Example home icon">restore_page</mat-icon>
        Load from Browser Storage
      </button>
      <button mat-menu-item (click)="downloadSystem()">
        <mat-icon aria-hidden="false" aria-label="Example home icon">download</mat-icon>
        Save to local File
      </button>
      <button mat-menu-item (click)="triggerFileUpload()">
        <mat-icon aria-hidden="false" aria-label="Example home icon">upload</mat-icon>
        Load from local File
      </button>
      <button mat-menu-item (click)="showRawSystem()">
        <mat-icon aria-hidden="false" aria-label="Example home icon">Raw on</mat-icon>
        Show raw system
      </button>
      <button mat-menu-item>
        <a [routerLink]="" (click)="loadElementarySystem()"> Load Elementary System </a>
      </button>
      <!--      <button mat-menu-item>-->
      <!--        <a [routerLink]="" (click)="loadLegacySystem()"> Load Legacy System </a> - -->
      <!--      </button>-->
      <button mat-menu-item>
        <a [routerLink]="" (click)="resetSystem()"> Load new System </a> -
      </button>

    </mat-menu>
  </div>


  <div *ngIf="!bidEditable" class="topline">
    <div>
      <span style="visibility: hidden"> --- </span>
      <span [ngClass]="{'opp': bnode.ob}" style="  font-size: 14pt;"
            (click)="editBid()" (mouseover)="calcStatistics()" matTooltip="Number of Subnodes: {{noNodes}}">
            <app-strain-symbol [strain]="bnode.bid"></app-strain-symbol>
        </span>
      <span style="visibility: hidden"> - </span>

      <span class="con" (click)="editBid()"> {{bnode.con}}</span>
      <span class="desc"> {{bnode.desc}}</span>

    </div>
    <div>
      <!--      <a [routerLink]="" (click)="editable=true" matTooltip="Edit">-->
      <!--        <mat-icon aria-hidden="false" aria-label="Example home icon">edit</mat-icon>-->
      <!--      </a>-->
      <a [routerLink]="" (click)="markAsLinkable()" matTooltip="Mark as linkable Node">
      <mat-icon aria-hidden="false" aria-label="Example home icon">link</mat-icon>
      </a>
<!--      <a [routerLink]="" (click)="showStatistics()" matTooltip="statistics">-->
<!--        <mat-icon>analytics</mat-icon>-->
<!--      </a>-->

    </div>
  </div>


  <div class="topline">

    <span *ngIf="bidEditable">
        <a [routerLink]="" (click)="bidEditable=false" matTooltip="Leave Edit">
          <mat-icon>edit_off</mat-icon>
        </a>
        <app-node-simple-edit [bnode]="bnode"></app-node-simple-edit>
      </span>

  </div>

  <app-bid-list [bnode]="bnode" [subject]="subject" [editable]="editable"></app-bid-list>

  <app-linkable-bnode-list [linkableBnodes]="linkableBnodes"
                           (linkNodeEvent)="linkBnode($event)"></app-linkable-bnode-list>

  <input #fileInput type="file" accept=".json" (change)="processFile(fileInput)" style="visibility:hidden">
</div>

<div class="bidjar" *ngIf="dealViewActivated">
  <app-deal-view [bNodeSequence]="bNodeSequence"></app-deal-view>
</div>
